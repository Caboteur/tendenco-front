{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Documents\\\\app-file\\\\tedenco\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ButtonTrend from'./ButtonTrend.js';import styles from'./Container.module.css';import Datas from'./Api/Api-request.js';import Viewer from'./Viewer.js';import _wiki from'wikijs';import countries from'./Api/countries.js';import ApiWikipedia from'./Api/Api-wikipedia.js';import{googleTranslate}from\"./Api/googleTranslate.js\";import Preloader from'./Preloader.js';var Container=/*#__PURE__*/function(_Component){_inherits(Container,_Component);var _super=_createSuper(Container);function Container(props){var _this;_classCallCheck(this,Container);_this=_super.call(this,props);_this.state={reponse:[],id:\"\",wiki:\"\",value:\"FR\",display:\"none\",displaytrad:\"none\",displayButton:\"inherit\",loading:\"inherit\",trad:false,googleSearch:\"tendances\",twitterSearch:\"tendances\",youtubeSearch:\"tendances\",country:countries()};return _this;}_createClass(Container,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(countries());this.News();}},{key:\"News\",value:function(){var _News=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var response,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({reponse:[]});_context.next=3;return fetch('/news-trend-'+this.state.value);case 3:response=_context.sent;_context.next=6;return response.json();case 6:body=_context.sent;body.map(function(tab){if(tab.country===_this2.state.value){_this2.setState({loading:\"none\"},console.log(_this2.state.loading));_this2.setState({reponse:[].concat(_toConsumableArray(_this2.state.reponse),[tab])});}});case 8:case\"end\":return _context.stop();}}},_callee,this);}));function News(){return _News.apply(this,arguments);}return News;}()},{key:\"handleChange\",value:function handleChange(event){var _this3=this;this.setState({value:event.target.value},function(){_this3.News();if(_this3.state.value===\"FR\"){_this3.setState({displaytrad:\"none\"});console.log(\"trad\");}else{_this3.setState({displaytrad:\"inherit\"});console.log(\"pas trad\");}});}},{key:\"handleClick\",value:function handleClick(e){if(this.state.display===\"none\"){this.setState({display:\"inherit\"});}else{this.setState({display:\"none\"});}var elem=e.target.getAttribute('name');var id=e.target.id;this.setState({id:id});this.wiki(elem);this.googleSearch(elem);this.twitterSearch(elem);this.youtubeSearch(elem);var element=document.getElementById(\"button\"+id);element.className=styles.articleContainerFull;}},{key:\"handleClickoff\",value:function handleClickoff(e){var element=document.getElementById(\"button\"+this.state.id);this.setState({display:\"none\"});element.style.display=\"none\";}},{key:\"wiki\",value:function wiki(data){var _this4=this;{var wikiSearchReturnValues=[];var url=\"https://fr.wikipedia.org/w/api.php\";var params={action:'query',list:'search',srsearch:data,format:'json'};url=url+'?origin=*';Object.keys(params).forEach(function(key){url+=\"&\"+key+\"=\"+params[key];});fetch(url).then(function(response){return response.json();}).then(function(response){for(var key in response.query.search){wikiSearchReturnValues.push({queryResultPageTitle:response.query.search[key].title});}}).then(function(response){if(wikiSearchReturnValues[0]!=undefined){var title=wikiSearchReturnValues[0].queryResultPageTitle;_this4.setState({wiki:title},function(){return console.log(title);});_wiki({apiUrl:'https://fr.wikipedia.org/w/api.php'}).find(title).then(function(page){return _this4.setState({wikiurl:page.raw.fullurl});},function(){return console.log(_this4.state.wikiurl);});}else{console.log(\"nop\");}});}}},{key:\"googleSearch\",value:function googleSearch(data){var search='https://www.google.com/search?q='+data;this.setState({googleSearch:search});}},{key:\"twitterSearch\",value:function twitterSearch(data){var search='https://twitter.com/search?q='+data+'&src=typed_query';this.setState({twitterSearch:search});}},{key:\"youtubeSearch\",value:function youtubeSearch(data){var search='https://www.youtube.com/results?search_query='+data;this.setState({youtubeSearch:search});}},{key:\"translate\",value:function translate(){if(this.state.trad===false){this.setState({trad:true});}else{this.setState({trad:false});}}},{key:\"render\",value:function render(props){var _this5=this;return/*#__PURE__*/React.createElement(\"div\",{className:styles.Container},/*#__PURE__*/React.createElement(\"div\",{className:styles.selectContainer},/*#__PURE__*/React.createElement(\"select\",{className:styles.selector,onChange:this.handleChange.bind(this),value:this.state.value},this.state.country.map(function(country,index){return/*#__PURE__*/React.createElement(\"option\",{key:index,className:styles.options,value:country.id},country.name);}))),/*#__PURE__*/React.createElement(\"div\",null,this.state.reponse.map(function(trend,index){return/*#__PURE__*/React.createElement(\"div\",{id:index,className:styles.articleContainer},/*#__PURE__*/React.createElement(ButtonTrend,{id:index,display:_this5.state.displayButton,trad:_this5.state.trad,value:trend.topic.title.query,click:_this5.handleClick.bind(_this5),key:index,title:trend.topic.title.query}),/*#__PURE__*/React.createElement(Viewer,{id:\"button\"+index,key:\"button\"+index,click:_this5.handleClickoff.bind(_this5),topics:trend.topic.title.query,wikiurl:_this5.state.wikiurl,wikititle:_this5.state.wiki,googleSearch:_this5.state.googleSearch,twitterSearch:_this5.state.twitterSearch,youtubeSearch:_this5.state.youtubeSearch,display:_this5.state.display,source:trend.topic.articles[0].source,title:trend.topic.articles[0].title,url:trend.topic.articles[0].url}));}),/*#__PURE__*/React.createElement(\"button\",{className:styles.selector,style:{display:this.state.displaytrad},onClick:this.translate.bind(this)},\"Traduire\")),/*#__PURE__*/React.createElement(Preloader,{display:this.state.loading}));}}]);return Container;}(Component);export default Container;","map":{"version":3,"sources":["D:/Documents/app-file/tedenco/src/components/Container.js"],"names":["React","Component","ButtonTrend","styles","Datas","Viewer","wiki","countries","ApiWikipedia","googleTranslate","Preloader","Container","props","state","reponse","id","value","display","displaytrad","displayButton","loading","trad","googleSearch","twitterSearch","youtubeSearch","country","console","log","News","setState","fetch","response","json","body","map","tab","event","target","e","elem","getAttribute","element","document","getElementById","className","articleContainerFull","style","data","wikiSearchReturnValues","url","params","action","list","srsearch","format","Object","keys","forEach","key","then","query","search","push","queryResultPageTitle","title","undefined","apiUrl","find","page","wikiurl","raw","fullurl","selectContainer","selector","handleChange","bind","index","options","name","trend","articleContainer","topic","handleClick","handleClickoff","articles","source","translate"],"mappings":"yjCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,WAAP,KAAwB,kBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,sBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,KAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,wBAAzB,CACA,OAASC,eAAT,KAAgC,0BAAhC,CACA,MAAOC,CAAAA,SAAP,KAAsB,gBAAtB,C,GAEMC,CAAAA,S,sGACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,OAAO,CAAC,EADG,CAEXC,EAAE,CAAC,EAFQ,CAGXT,IAAI,CAAC,EAHM,CAIXU,KAAK,CAAC,IAJK,CAKXC,OAAO,CAAC,MALG,CAMXC,WAAW,CAAC,MAND,CAOXC,aAAa,CAAC,SAPH,CAQXC,OAAO,CAAC,SARG,CASXC,IAAI,CAAC,KATM,CAUXC,YAAY,CAAC,WAVF,CAWXC,aAAa,CAAC,WAXH,CAYXC,aAAa,CAAC,WAZH,CAaXC,OAAO,CAAClB,SAAS,EAbN,CAAb,CAFiB,aAiBlB,C,mFAEkB,CACjBmB,OAAO,CAACC,GAAR,CAAYpB,SAAS,EAArB,EACA,KAAKqB,IAAL,GACD,C,sQAIC,KAAKC,QAAL,CAAc,CAAEf,OAAO,CAAE,EAAX,CAAd,E,sBACsBgB,CAAAA,KAAK,CAAC,eAAe,KAAKjB,KAAL,CAAWG,KAA3B,C,QAArBe,Q,qCACaA,CAAAA,QAAQ,CAACC,IAAT,E,QAAbC,I,eAEPA,IAAI,CAACC,GAAL,CAAS,SAACC,GAAD,CAAO,CAEb,GAAIA,GAAG,CAACV,OAAJ,GAAiB,MAAI,CAACZ,KAAL,CAAWG,KAAhC,CAAsC,CACpC,MAAI,CAACa,QAAL,CAAc,CAAET,OAAO,CAAC,MAAV,CAAd,CAAkCM,OAAO,CAACC,GAAR,CAAY,MAAI,CAACd,KAAL,CAAWO,OAAvB,CAAlC,EACA,MAAI,CAACS,QAAL,CAAc,CAAEf,OAAO,8BAAM,MAAI,CAACD,KAAL,CAAWC,OAAjB,GAA0BqB,GAA1B,EAAT,CAAd,EACD,CACF,CANF,E,mLASaC,K,CAAM,iBAClB,KAAKP,QAAL,CAAc,CAACb,KAAK,CAAEoB,KAAK,CAACC,MAAN,CAAarB,KAArB,CAAd,CAA2C,UAAI,CAC7C,MAAI,CAACY,IAAL,GACA,GAAG,MAAI,CAACf,KAAL,CAAWG,KAAX,GAAqB,IAAxB,CAA6B,CACzB,MAAI,CAACa,QAAL,CAAc,CAACX,WAAW,CAAE,MAAd,CAAd,EACAQ,OAAO,CAACC,GAAR,CAAY,MAAZ,EACH,CAHD,IAGK,CACH,MAAI,CAACE,QAAL,CAAc,CAACX,WAAW,CAAE,SAAd,CAAd,EACAQ,OAAO,CAACC,GAAR,CAAY,UAAZ,EACD,CACF,CATD,EAYD,C,gDAEWW,C,CAAE,CACZ,GAAI,KAAKzB,KAAL,CAAWI,OAAX,GAAqB,MAAzB,CAAgC,CAC9B,KAAKY,QAAL,CAAc,CAACZ,OAAO,CAAC,SAAT,CAAd,EACD,CAFD,IAEK,CACH,KAAKY,QAAL,CAAc,CAACZ,OAAO,CAAC,MAAT,CAAd,EACD,CACD,GAAMsB,CAAAA,IAAI,CAAGD,CAAC,CAACD,MAAF,CAASG,YAAT,CAAsB,MAAtB,CAAb,CACA,GAAMzB,CAAAA,EAAE,CAAGuB,CAAC,CAACD,MAAF,CAAStB,EAApB,CAEA,KAAKc,QAAL,CAAc,CAACd,EAAE,CAACA,EAAJ,CAAd,EACA,KAAKT,IAAL,CAAUiC,IAAV,EACA,KAAKjB,YAAL,CAAkBiB,IAAlB,EACA,KAAKhB,aAAL,CAAmBgB,IAAnB,EACA,KAAKf,aAAL,CAAmBe,IAAnB,EACA,GAAME,CAAAA,OAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAW5B,EAAnC,CAAhB,CACA0B,OAAO,CAACG,SAAR,CAAkBzC,MAAM,CAAC0C,oBAAzB,CACD,C,sDAEcP,C,CAAE,CACjB,GAAMG,CAAAA,OAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAW,KAAK9B,KAAL,CAAWE,EAA9C,CAAhB,CACA,KAAKc,QAAL,CAAc,CAACZ,OAAO,CAAC,MAAT,CAAd,EACAwB,OAAO,CAACK,KAAR,CAAc7B,OAAd,CAAsB,MAAtB,CAEC,C,kCAEK8B,I,CAAK,iBACR,CAEE,GAAMC,CAAAA,sBAAsB,CAAG,EAA/B,CAEE,GAAIC,CAAAA,GAAG,CAAG,oCAAV,CACA,GAAIC,CAAAA,MAAM,CAAG,CACXC,MAAM,CAAE,OADG,CAEXC,IAAI,CAAE,QAFK,CAGXC,QAAQ,CAAEN,IAHC,CAIXO,MAAM,CAAE,MAJG,CAAb,CAOAL,GAAG,CAAGA,GAAG,CAAG,WAAZ,CACAM,MAAM,CAACC,IAAP,CAAYN,MAAZ,EAAoBO,OAApB,CAA4B,SAACC,GAAD,CAAS,CACnCT,GAAG,EAAI,IAAMS,GAAN,CAAY,GAAZ,CAAkBR,MAAM,CAACQ,GAAD,CAA/B,CACD,CAFD,EAIA5B,KAAK,CAACmB,GAAD,CAAL,CACGU,IADH,CAEI,SAAC5B,QAAD,CAAa,CACX,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CAJL,EAMG2B,IANH,CAOI,SAAC5B,QAAD,CAAa,CACX,IAAK,GAAI2B,CAAAA,GAAT,GAAgB3B,CAAAA,QAAQ,CAAC6B,KAAT,CAAeC,MAA/B,CAAuC,CACtCb,sBAAsB,CAACc,IAAvB,CAA4B,CACzBC,oBAAoB,CAAEhC,QAAQ,CAAC6B,KAAT,CAAeC,MAAf,CAAsBH,GAAtB,EAA2BM,KADxB,CAA5B,EAGA,CACF,CAbL,EAgBGL,IAhBH,CAiBI,SAAC5B,QAAD,CAAa,CAEV,GAAIiB,sBAAsB,CAAC,CAAD,CAAtB,EAA6BiB,SAAjC,CAA2C,CAC1C,GAAID,CAAAA,KAAK,CAAGhB,sBAAsB,CAAC,CAAD,CAAtB,CAA0Be,oBAAtC,CAEC,MAAI,CAAClC,QAAL,CAAc,CAACvB,IAAI,CAAC0D,KAAN,CAAd,CAA4B,iBAAItC,CAAAA,OAAO,CAACC,GAAR,CAAYqC,KAAZ,CAAJ,EAA5B,EACA1D,KAAI,CAAC,CAAE4D,MAAM,CAAE,oCAAV,CAAD,CAAJ,CACGC,IADH,CACQH,KADR,EAEKL,IAFL,CAEU,SAAAS,IAAI,QAAI,CAAA,MAAI,CAACvC,QAAL,CAAc,CAACwC,OAAO,CAACD,IAAI,CAACE,GAAL,CAASC,OAAlB,CAAd,CAAJ,EAFd,CAE6D,iBAAI7C,CAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACd,KAAL,CAAWwD,OAAvB,CAAJ,EAF7D,EAGF,CAPA,IAOK,CACJ3C,OAAO,CAACC,GAAR,CAAY,KAAZ,EACD,CACF,CA7BL,EAgCD,CACJ,C,kDAEWoB,I,CAAK,CAChB,GAAMc,CAAAA,MAAM,CAAG,mCAAmCd,IAAlD,CACA,KAAKlB,QAAL,CAAc,CAACP,YAAY,CAACuC,MAAd,CAAd,EACD,C,oDAEad,I,CAAK,CACjB,GAAMc,CAAAA,MAAM,CAAG,gCAAgCd,IAAhC,CAAqC,kBAApD,CACA,KAAKlB,QAAL,CAAc,CAACN,aAAa,CAACsC,MAAf,CAAd,EACD,C,oDAEad,I,CAAK,CACjB,GAAMc,CAAAA,MAAM,CAAG,gDAAgDd,IAA/D,CACA,KAAKlB,QAAL,CAAc,CAACL,aAAa,CAACqC,MAAf,CAAd,EACD,C,6CAEU,CACT,GAAG,KAAKhD,KAAL,CAAWQ,IAAX,GAAoB,KAAvB,CAA6B,CACzB,KAAKQ,QAAL,CAAc,CAACR,IAAI,CAAC,IAAN,CAAd,EACH,CAFD,IAEK,CACH,KAAKQ,QAAL,CAAc,CAACR,IAAI,CAAC,KAAN,CAAd,EACD,CAEF,C,sCAEMT,K,CAAO,iBAEZ,mBACE,2BAAK,SAAS,CAAET,MAAM,CAACQ,SAAvB,eACE,2BAAK,SAAS,CAAER,MAAM,CAACqE,eAAvB,eACE,8BAAS,SAAS,CAAErE,MAAM,CAACsE,QAA3B,CAAqC,QAAQ,CAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAA/C,CAA6E,KAAK,CAAE,KAAK9D,KAAL,CAAWG,KAA/F,EAEG,KAAKH,KAAL,CAAWY,OAAX,CAAmBS,GAAnB,CAAuB,SAACT,OAAD,CAAUmD,KAAV,qBACtB,8BAAQ,GAAG,CAAEA,KAAb,CAAoB,SAAS,CAAEzE,MAAM,CAAC0E,OAAtC,CAA+C,KAAK,CAAEpD,OAAO,CAACV,EAA9D,EAAmEU,OAAO,CAACqD,IAA3E,CADsB,EAAvB,CAFH,CADF,CADF,cAUE,+BAEI,KAAKjE,KAAL,CAAWC,OAAX,CAAmBoB,GAAnB,CAAuB,SAAC6C,KAAD,CAAQH,KAAR,qBAEvB,2BAAK,EAAE,CAAEA,KAAT,CAAgB,SAAS,CAAEzE,MAAM,CAAC6E,gBAAlC,eAEE,oBAAC,WAAD,EAAa,EAAE,CAAEJ,KAAjB,CAAwB,OAAO,CAAE,MAAI,CAAC/D,KAAL,CAAWM,aAA5C,CAA2D,IAAI,CAAE,MAAI,CAACN,KAAL,CAAWQ,IAA5E,CAAkF,KAAK,CAAE0D,KAAK,CAACE,KAAN,CAAYjB,KAAZ,CAAkBJ,KAA3G,CAAkH,KAAK,CAAE,MAAI,CAACsB,WAAL,CAAiBP,IAAjB,CAAsB,MAAtB,CAAzH,CAAsJ,GAAG,CAAEC,KAA3J,CAAkK,KAAK,CAAEG,KAAK,CAACE,KAAN,CAAYjB,KAAZ,CAAkBJ,KAA3L,EAFF,cAIE,oBAAC,MAAD,EACE,EAAE,CAAE,SAAWgB,KADjB,CAEE,GAAG,CAAE,SAAWA,KAFlB,CAGE,KAAK,CAAE,MAAI,CAACO,cAAL,CAAoBR,IAApB,CAAyB,MAAzB,CAHT,CAIE,MAAM,CAAEI,KAAK,CAACE,KAAN,CAAYjB,KAAZ,CAAkBJ,KAJ5B,CAKE,OAAO,CAAE,MAAI,CAAC/C,KAAL,CAAWwD,OALtB,CAME,SAAS,CAAE,MAAI,CAACxD,KAAL,CAAWP,IANxB,CAOE,YAAY,CAAE,MAAI,CAACO,KAAL,CAAWS,YAP3B,CAQE,aAAa,CAAE,MAAI,CAACT,KAAL,CAAWU,aAR5B,CASE,aAAa,CAAE,MAAI,CAACV,KAAL,CAAWW,aAT5B,CAUE,OAAO,CAAE,MAAI,CAACX,KAAL,CAAWI,OAVtB,CAWE,MAAM,CAAE8D,KAAK,CAACE,KAAN,CAAYG,QAAZ,CAAqB,CAArB,EAAwBC,MAXlC,CAYE,KAAK,CAAEN,KAAK,CAACE,KAAN,CAAYG,QAAZ,CAAqB,CAArB,EAAwBpB,KAZjC,CAaE,GAAG,CAAEe,KAAK,CAACE,KAAN,CAAYG,QAAZ,CAAqB,CAArB,EAAwBnC,GAb/B,EAJF,CAFuB,EAAvB,CAFJ,cA6BE,8BAAQ,SAAS,CAAE9C,MAAM,CAACsE,QAA1B,CAAoC,KAAK,CAAE,CAACxD,OAAO,CAAC,KAAKJ,KAAL,CAAWK,WAApB,CAA3C,CAA6E,OAAO,CAAE,KAAKoE,SAAL,CAAeX,IAAf,CAAoB,IAApB,CAAtF,aA7BF,CAVF,cA2CI,oBAAC,SAAD,EAAW,OAAO,CAAE,KAAK9D,KAAL,CAAWO,OAA/B,EA3CJ,CADF,CAgDD,C,uBA/MqBnB,S,EAkNxB,cAAeU,CAAAA,SAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport ButtonTrend from './ButtonTrend.js'\r\nimport styles from './Container.module.css';\r\nimport Datas from './Api/Api-request.js'\r\nimport Viewer from './Viewer.js'\r\nimport wiki from 'wikijs'\r\nimport countries from './Api/countries.js'\r\nimport ApiWikipedia from './Api/Api-wikipedia.js'\r\nimport { googleTranslate } from \"./Api/googleTranslate.js\";\r\nimport Preloader from './Preloader.js'\r\n\r\nclass Container extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reponse:[],\r\n      id:\"\",\r\n      wiki:\"\",\r\n      value:\"FR\",\r\n      display:\"none\",\r\n      displaytrad:\"none\",\r\n      displayButton:\"inherit\",\r\n      loading:\"inherit\",\r\n      trad:false,\r\n      googleSearch:\"tendances\",\r\n      twitterSearch:\"tendances\",\r\n      youtubeSearch:\"tendances\",\r\n      country:countries()\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    console.log(countries())\r\n    this.News();\r\n  }\r\n\r\n\r\n  async News(){\r\n    this.setState({ reponse: [] })\r\n    const response= await fetch('/news-trend-'+this.state.value);\r\n    const body = await response.json();\r\n\r\n   body.map((tab)=>{\r\n\r\n      if (tab.country  === this.state.value){\r\n        this.setState({ loading:\"none\" }, console.log(this.state.loading))\r\n        this.setState({ reponse: [...this.state.reponse, tab] })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleChange (event){\r\n    this.setState({value: event.target.value}, ()=>{\r\n      this.News();\r\n      if(this.state.value === \"FR\"){\r\n          this.setState({displaytrad: \"none\"})\r\n          console.log(\"trad\")\r\n      }else{\r\n        this.setState({displaytrad: \"inherit\"})\r\n        console.log(\"pas trad\")\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  handleClick(e){\r\n    if (this.state.display===\"none\"){\r\n      this.setState({display:\"inherit\"});\r\n    }else{\r\n      this.setState({display:\"none\"});\r\n    }\r\n    const elem = e.target.getAttribute('name')\r\n    const id = e.target.id;\r\n\r\n    this.setState({id:id});\r\n    this.wiki(elem)\r\n    this.googleSearch(elem);\r\n    this.twitterSearch(elem);\r\n    this.youtubeSearch(elem);\r\n    const element = document.getElementById(\"button\" + id)\r\n    element.className=styles.articleContainerFull\r\n  }\r\n\r\n  handleClickoff(e){\r\n  const element = document.getElementById(\"button\" + this.state.id)\r\n  this.setState({display:\"none\"});\r\n  element.style.display=\"none\";\r\n\r\n  }\r\n\r\n   wiki(data){\r\n     {\r\n\r\n       const wikiSearchReturnValues = []\r\n\r\n         var url = \"https://fr.wikipedia.org/w/api.php\";\r\n         var params = {\r\n           action: 'query',\r\n           list: 'search',\r\n           srsearch: data,\r\n           format: 'json'\r\n         };\r\n\r\n         url = url + '?origin=*';\r\n         Object.keys(params).forEach((key) => {\r\n           url += \"&\" + key + \"=\" + params[key];\r\n         });\r\n\r\n         fetch(url)\r\n           .then(\r\n             (response) =>{\r\n               return response.json();\r\n             }\r\n           )\r\n           .then(\r\n             (response) =>{\r\n               for (var key in response.query.search) {\r\n                wikiSearchReturnValues.push({\r\n                   queryResultPageTitle: response.query.search[key].title,\r\n                 });\r\n               }\r\n             }\r\n           )\r\n\r\n           .then(\r\n             (response)=> {\r\n\r\n                if (wikiSearchReturnValues[0] != undefined){\r\n                 let title = wikiSearchReturnValues[0].queryResultPageTitle;\r\n\r\n                  this.setState({wiki:title}, ()=>console.log(title));\r\n                  wiki({ apiUrl: 'https://fr.wikipedia.org/w/api.php' })\r\n                    .find(title)\r\n                      .then(page => this.setState({wikiurl:page.raw.fullurl}), ()=>console.log(this.state.wikiurl))\r\n               }else {\r\n                 console.log(\"nop\")\r\n               }\r\n             }\r\n           )\r\n\r\n       }\r\n   }\r\n\r\n  googleSearch(data){\r\n    const search = 'https://www.google.com/search?q='+data;\r\n    this.setState({googleSearch:search})\r\n  }\r\n\r\n  twitterSearch(data){\r\n    const search = 'https://twitter.com/search?q='+data+'&src=typed_query'\r\n    this.setState({twitterSearch:search})\r\n  }\r\n\r\n  youtubeSearch(data){\r\n    const search = 'https://www.youtube.com/results?search_query='+data;\r\n    this.setState({youtubeSearch:search})\r\n  }\r\n\r\n  translate(){\r\n    if(this.state.trad === false){\r\n        this.setState({trad:true})\r\n    }else{\r\n      this.setState({trad:false})\r\n    }\r\n\r\n  }\r\n\r\n  render(props) {\r\n\r\n    return (\r\n      <div className={styles.Container}>\r\n        <div className={styles.selectContainer}>\r\n          <select  className={styles.selector} onChange={this.handleChange.bind(this)} value={this.state.value}>\r\n\r\n            {this.state.country.map((country, index)=>\r\n              <option key={index} className={styles.options} value={country.id}>{country.name}</option>\r\n            )}\r\n          </select>\r\n\r\n        </div>\r\n        <div >\r\n          {\r\n            this.state.reponse.map((trend, index) =>\r\n\r\n            <div id={index} className={styles.articleContainer}>\r\n\r\n              <ButtonTrend id={index} display={this.state.displayButton} trad={this.state.trad} value={trend.topic.title.query} click={this.handleClick.bind(this)} key={index} title={trend.topic.title.query}/>\r\n\r\n              <Viewer\r\n                id={\"button\" + index}\r\n                key={\"button\" + index}\r\n                click={this.handleClickoff.bind(this)}\r\n                topics={trend.topic.title.query}\r\n                wikiurl={this.state.wikiurl}\r\n                wikititle={this.state.wiki}\r\n                googleSearch={this.state.googleSearch}\r\n                twitterSearch={this.state.twitterSearch}\r\n                youtubeSearch={this.state.youtubeSearch}\r\n                display={this.state.display}\r\n                source={trend.topic.articles[0].source}\r\n                title={trend.topic.articles[0].title}\r\n                url={trend.topic.articles[0].url}\r\n                />\r\n\r\n            </div>\r\n\r\n          )}\r\n\r\n\r\n          <button className={styles.selector} style={{display:this.state.displaytrad}} onClick={this.translate.bind(this)}>Traduire</button>\r\n\r\n        </div>\r\n\r\n          <Preloader display={this.state.loading} />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container;\r\n"]},"metadata":{},"sourceType":"module"}