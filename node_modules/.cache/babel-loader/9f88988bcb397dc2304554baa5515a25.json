{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\app-file\\\\tedenco - front\\\\src\\\\components\\\\Container.js\";\nimport React, { Component } from 'react';\nimport ButtonTrend from './ButtonTrend.js';\nimport styles from './Container.module.css';\nimport Viewer from './Viewer.js';\nimport wiki from 'wikijs';\nimport countries from './Api/countries.js';\nimport Preloader from './Preloader.js';\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reponse: [],\n      id: \"\",\n      wiki: \"\",\n      value: \"FR\",\n      display: \"none\",\n      displaytrad: \"none\",\n      displayButton: \"inherit\",\n      loading: \"inherit\",\n      trad: false,\n      googleSearch: \"tendances\",\n      twitterSearch: \"tendances\",\n      youtubeSearch: \"tendances\",\n      country: countries()\n    };\n  }\n\n  componentDidMount() {\n    console.log(countries());\n    this.News();\n  }\n\n  async News() {\n    this.setState({\n      reponse: []\n    });\n    const response = await fetch('https://tedenco-topics.herokuapp.com/news-trend-' + this.state.value);\n    const body = await response.json();\n    body.map(tab => {\n      if (tab.country === this.state.value) {\n        this.setState({\n          loading: \"none\"\n        });\n        this.setState({\n          reponse: [...this.state.reponse, tab]\n        });\n      }\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    }, () => {\n      this.News();\n\n      if (this.state.value === \"FR\") {\n        this.setState({\n          displaytrad: \"none\"\n        });\n        console.log(\"trad\");\n      } else {\n        this.setState({\n          displaytrad: \"inherit\"\n        });\n        console.log(\"pas trad\");\n      }\n    });\n  }\n\n  handleClick(e) {\n    if (this.state.display === \"none\") {\n      this.setState({\n        display: \"inherit\"\n      });\n    } else {\n      this.setState({\n        display: \"none\"\n      });\n    }\n\n    const elem = e.target.getAttribute('name');\n    const id = e.target.id;\n    this.setState({\n      id: id\n    });\n    this.wiki(elem);\n    this.googleSearch(elem);\n    this.twitterSearch(elem);\n    this.youtubeSearch(elem);\n    const element = document.getElementById(\"button\" + id);\n    element.className = styles.articleContainerFull;\n  }\n\n  handleClickoff(e) {\n    const element = document.getElementById(\"button\" + this.state.id);\n    this.setState({\n      display: \"none\"\n    });\n    element.style.display = \"none\";\n  }\n\n  wiki(data) {\n    {\n      const wikiSearchReturnValues = [];\n      var url = \"https://fr.wikipedia.org/w/api.php\";\n      var params = {\n        action: 'query',\n        list: 'search',\n        srsearch: data,\n        format: 'json'\n      };\n      url = url + '?origin=*';\n      Object.keys(params).forEach(key => {\n        url += \"&\" + key + \"=\" + params[key];\n      });\n      fetch(url).then(response => {\n        return response.json();\n      }).then(response => {\n        for (var key in response.query.search) {\n          wikiSearchReturnValues.push({\n            queryResultPageTitle: response.query.search[key].title\n          });\n        }\n      }).then(response => {\n        if (wikiSearchReturnValues[0] !== undefined) {\n          let title = wikiSearchReturnValues[0].queryResultPageTitle;\n          this.setState({\n            wiki: title\n          }, () => console.log(title));\n          wiki({\n            apiUrl: 'https://fr.wikipedia.org/w/api.php'\n          }).find(title).then(page => this.setState({\n            wikiurl: page.raw.fullurl\n          }), () => console.log(this.state.wikiurl));\n        } else {\n          console.log(\"nop\");\n        }\n      });\n    }\n  }\n\n  googleSearch(data) {\n    const search = 'https://www.google.com/search?q=' + data;\n    this.setState({\n      googleSearch: search\n    });\n  }\n\n  twitterSearch(data) {\n    const search = 'https://twitter.com/search?q=' + data + '&src=typed_query';\n    this.setState({\n      twitterSearch: search\n    });\n  }\n\n  youtubeSearch(data) {\n    const search = 'https://www.youtube.com/results?search_query=' + data;\n    this.setState({\n      youtubeSearch: search\n    });\n  }\n\n  translate() {\n    if (this.state.trad === false) {\n      this.setState({\n        trad: true\n      });\n    } else {\n      this.setState({\n        trad: false\n      });\n    }\n  }\n\n  render(props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.selectContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: styles.selector,\n      onChange: this.handleChange.bind(this),\n      value: this.state.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, this.state.country.map((country, index) => /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      className: styles.options,\n      value: country.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, country.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    }, this.state.reponse.map((trend, index) => /*#__PURE__*/React.createElement(\"div\", {\n      id: \"container\" + index,\n      className: styles.articleContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 13\n      }\n    }, console.log(trend), /*#__PURE__*/React.createElement(ButtonTrend, {\n      id: index,\n      display: this.state.displayButton,\n      trad: this.state.trad,\n      value: trend.topic.title.query,\n      click: this.handleClick.bind(this),\n      key: index,\n      title: trend.topic.title.query,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Viewer, {\n      id: \"button\" + index,\n      key: \"button\" + index,\n      click: this.handleClickoff.bind(this),\n      topics: trend.topic.title.query,\n      wikiurl: this.state.wikiurl,\n      wikititle: this.state.wiki,\n      googleSearch: this.state.googleSearch,\n      twitterSearch: this.state.twitterSearch,\n      youtubeSearch: this.state.youtubeSearch,\n      display: this.state.display,\n      source: trend.topic.articles[0].source,\n      title: trend.topic.articles[0].title,\n      url: trend.topic.articles[0].url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.selector,\n      style: {\n        display: this.state.displaytrad\n      },\n      onClick: this.translate.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }, \"Traduire\")), /*#__PURE__*/React.createElement(Preloader, {\n      display: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nexport default Container;","map":{"version":3,"sources":["D:/Documents/app-file/tedenco - front/src/components/Container.js"],"names":["React","Component","ButtonTrend","styles","Viewer","wiki","countries","Preloader","Container","constructor","props","state","reponse","id","value","display","displaytrad","displayButton","loading","trad","googleSearch","twitterSearch","youtubeSearch","country","componentDidMount","console","log","News","setState","response","fetch","body","json","map","tab","handleChange","event","target","handleClick","e","elem","getAttribute","element","document","getElementById","className","articleContainerFull","handleClickoff","style","data","wikiSearchReturnValues","url","params","action","list","srsearch","format","Object","keys","forEach","key","then","query","search","push","queryResultPageTitle","title","undefined","apiUrl","find","page","wikiurl","raw","fullurl","translate","render","selectContainer","selector","bind","index","options","name","trend","articleContainer","topic","articles","source"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ButtonTrend from './ButtonTrend.js'\r\nimport styles from './Container.module.css';\r\nimport Viewer from './Viewer.js'\r\nimport wiki from 'wikijs'\r\nimport countries from './Api/countries.js'\r\nimport Preloader from './Preloader.js'\r\n\r\n\r\nclass Container extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reponse:[],\r\n      id:\"\",\r\n      wiki:\"\",\r\n      value:\"FR\",\r\n      display:\"none\",\r\n      displaytrad:\"none\",\r\n      displayButton:\"inherit\",\r\n      loading:\"inherit\",\r\n      trad:false,\r\n      googleSearch:\"tendances\",\r\n      twitterSearch:\"tendances\",\r\n      youtubeSearch:\"tendances\",\r\n      country:countries()\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    console.log(countries())\r\n    this.News();\r\n  }\r\n\r\n\r\n  async News(){\r\n    this.setState({ reponse: [] })\r\n    const response= await fetch('https://tedenco-topics.herokuapp.com/news-trend-'+this.state.value);\r\n    const body = await response.json();\r\n\r\n   body.map((tab)=>{\r\n\r\n      if (tab.country  === this.state.value){\r\n        this.setState({ loading:\"none\" })\r\n        this.setState({ reponse: [...this.state.reponse, tab] })\r\n      }\r\n    })\r\n  }\r\n\r\n  handleChange (event){\r\n    this.setState({value: event.target.value}, ()=>{\r\n      this.News();\r\n      if(this.state.value === \"FR\"){\r\n          this.setState({displaytrad: \"none\"})\r\n          console.log(\"trad\")\r\n      }else{\r\n        this.setState({displaytrad: \"inherit\"})\r\n        console.log(\"pas trad\")\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  handleClick(e){\r\n    if (this.state.display===\"none\"){\r\n      this.setState({display:\"inherit\"});\r\n    }else{\r\n      this.setState({display:\"none\"});\r\n    }\r\n    const elem = e.target.getAttribute('name')\r\n    const id = e.target.id;\r\n\r\n    this.setState({id:id});\r\n    this.wiki(elem)\r\n    this.googleSearch(elem);\r\n    this.twitterSearch(elem);\r\n    this.youtubeSearch(elem);\r\n    const element = document.getElementById(\"button\" + id)\r\n    element.className=styles.articleContainerFull\r\n  }\r\n\r\n  handleClickoff(e){\r\n  const element = document.getElementById(\"button\" + this.state.id)\r\n  this.setState({display:\"none\"});\r\n  element.style.display=\"none\";\r\n\r\n  }\r\n\r\n   wiki(data){\r\n     {\r\n       const wikiSearchReturnValues = []\r\n\r\n         var url = \"https://fr.wikipedia.org/w/api.php\";\r\n         var params = {\r\n           action: 'query',\r\n           list: 'search',\r\n           srsearch: data,\r\n           format: 'json'\r\n         };\r\n\r\n         url = url + '?origin=*';\r\n         Object.keys(params).forEach((key) => {\r\n           url += \"&\" + key + \"=\" + params[key];\r\n         });\r\n\r\n         fetch(url)\r\n           .then(\r\n             (response) =>{\r\n               return response.json();\r\n             }\r\n           )\r\n           .then(\r\n             (response) =>{\r\n               for (var key in response.query.search) {\r\n                wikiSearchReturnValues.push({\r\n                   queryResultPageTitle: response.query.search[key].title,\r\n                 });\r\n               }\r\n             }\r\n           )\r\n\r\n           .then(\r\n             (response)=> {\r\n\r\n                if (wikiSearchReturnValues[0] !== undefined){\r\n                 let title = wikiSearchReturnValues[0].queryResultPageTitle;\r\n\r\n                  this.setState({wiki:title}, ()=>console.log(title));\r\n                  wiki({ apiUrl: 'https://fr.wikipedia.org/w/api.php' })\r\n                    .find(title)\r\n                      .then(page => this.setState({wikiurl:page.raw.fullurl}), ()=>console.log(this.state.wikiurl))\r\n               }else {\r\n                 console.log(\"nop\")\r\n               }\r\n             }\r\n           )\r\n\r\n       }\r\n   }\r\n\r\n  googleSearch(data){\r\n    const search = 'https://www.google.com/search?q='+data;\r\n    this.setState({googleSearch:search})\r\n  }\r\n\r\n  twitterSearch(data){\r\n    const search = 'https://twitter.com/search?q='+data+'&src=typed_query'\r\n    this.setState({twitterSearch:search})\r\n  }\r\n\r\n  youtubeSearch(data){\r\n    const search = 'https://www.youtube.com/results?search_query='+data;\r\n    this.setState({youtubeSearch:search})\r\n  }\r\n\r\n  translate(){\r\n    if(this.state.trad === false){\r\n        this.setState({trad:true})\r\n    }else{\r\n      this.setState({trad:false})\r\n    }\r\n\r\n  }\r\n\r\n  render(props) {\r\n\r\n    return (\r\n      <div className={styles.Container}>\r\n        <div className={styles.selectContainer}>\r\n          <select  className={styles.selector} onChange={this.handleChange.bind(this)} value={this.state.value}>\r\n\r\n            {this.state.country.map((country, index)=>\r\n              <option key={index} className={styles.options} value={country.id}>{country.name}</option>\r\n            )}\r\n          </select>\r\n\r\n        </div>\r\n        <div >\r\n          {\r\n            this.state.reponse.map((trend, index) =>\r\n\r\n            <div id={\"container\" + index} className={styles.articleContainer}>\r\n              {console.log(trend)}\r\n              <ButtonTrend id={index} display={this.state.displayButton} trad={this.state.trad} value={trend.topic.title.query} click={this.handleClick.bind(this)} key={index} title={trend.topic.title.query}/>\r\n\r\n              <Viewer\r\n                id={\"button\" + index}\r\n                key={\"button\" + index}\r\n                click={this.handleClickoff.bind(this)}\r\n                topics={trend.topic.title.query}\r\n                wikiurl={this.state.wikiurl}\r\n                wikititle={this.state.wiki}\r\n                googleSearch={this.state.googleSearch}\r\n                twitterSearch={this.state.twitterSearch}\r\n                youtubeSearch={this.state.youtubeSearch}\r\n                display={this.state.display}\r\n                source={trend.topic.articles[0].source}\r\n                title={trend.topic.articles[0].title}\r\n                url={trend.topic.articles[0].url}\r\n                />\r\n\r\n            </div>\r\n\r\n          )}\r\n\r\n\r\n          <button className={styles.selector} style={{display:this.state.displaytrad}} onClick={this.translate.bind(this)}>Traduire</button>\r\n\r\n        </div>\r\n\r\n          <Preloader display={this.state.loading} />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container;\r\n"]},"metadata":{},"sourceType":"module"}