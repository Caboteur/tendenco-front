{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\app-file\\\\tedenco - front\\\\src\\\\components\\\\Container.js\";\nimport React, { Component } from 'react';\nimport ButtonTrend from './ButtonTrend.js';\nimport styles from './Container.module.css';\nimport Viewer from './Viewer.js';\nimport wiki from 'wikijs';\nimport countries from './Api/countries.js';\nimport Preloader from './Preloader.js';\n\nclass Container extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reponse: [],\n      id: \"\",\n      wiki: \"\",\n      value: \"FR\",\n      display: \"none\",\n      displaytrad: \"none\",\n      displayButton: \"inherit\",\n      loading: \"inherit\",\n      trad: false,\n      googleSearch: \"tendances\",\n      twitterSearch: \"tendances\",\n      youtubeSearch: \"tendances\",\n      country: countries()\n    };\n  }\n\n  componentDidMount() {\n    this.fastResponse();\n    this.Server();\n  }\n\n  async fastResponse() {\n    const response = await fetch('https://tedenco-topics.herokuapp.com/first-trend');\n    const body = await response.json();\n    this.setState({\n      data: body\n    });\n    this.News();\n  }\n\n  async Server() {\n    const response = await fetch('https://tedenco-topics.herokuapp.com/news-trend');\n    const body = await response.json();\n    this.setState({\n      data: body\n    });\n  }\n\n  async News() {\n    await this.setState({\n      loading: \"inherit\"\n    });\n    await this.setState({\n      reponse: []\n    });\n    await this.state.data.map(tab => {\n      if (tab.country === this.state.value) {\n        this.setState({\n          loading: \"none\"\n        });\n        this.setState({\n          reponse: [...this.state.reponse, tab]\n        });\n      }\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    }, () => {\n      this.News();\n\n      if (this.state.value === \"FR\") {\n        this.setState({\n          displaytrad: \"none\"\n        });\n      } else {\n        this.setState({\n          displaytrad: \"inherit\"\n        });\n      }\n    });\n  }\n\n  handleClick(e) {\n    const targt = \"button\" + e.target.id;\n    document.getElementById(targt).style.display = \"inherit\";\n    this.setState({\n      displayButton: \"none\"\n    });\n    const elem = e.target.getAttribute('name');\n    const id = e.target.id;\n    this.setState({\n      id: id\n    });\n    this.wiki(elem);\n    this.googleSearch(elem);\n    this.twitterSearch(elem);\n    this.youtubeSearch(elem);\n    const element = document.getElementById(\"button\" + id);\n    element.className = styles.articleContainerFull;\n  }\n\n  handleClickoff(e) {\n    this.setState({\n      displayButton: \"inherit\"\n    });\n    const element = document.getElementById(\"button\" + this.state.id);\n    this.setState({\n      display: \"none\"\n    });\n    element.style.display = \"none\";\n  }\n\n  wiki(data) {\n    {\n      const wikiSearchReturnValues = [];\n      var url = \"https://fr.wikipedia.org/w/api.php\";\n      var params = {\n        action: 'query',\n        list: 'search',\n        srsearch: data,\n        format: 'json'\n      };\n      url = url + '?origin=*';\n      Object.keys(params).forEach(key => {\n        url += \"&\" + key + \"=\" + params[key];\n      });\n      fetch(url).then(response => {\n        return response.json();\n      }).then(response => {\n        for (var key in response.query.search) {\n          wikiSearchReturnValues.push({\n            queryResultPageTitle: response.query.search[key].title\n          });\n        }\n      }).then(response => {\n        if (wikiSearchReturnValues[0] !== undefined) {\n          let title = wikiSearchReturnValues[0].queryResultPageTitle;\n          this.setState({\n            wiki: title\n          }, () => console.log(title));\n          wiki({\n            apiUrl: 'https://fr.wikipedia.org/w/api.php'\n          }).find(title).then(page => this.setState({\n            wikiurl: page.raw.fullurl\n          }), () => console.log(this.state.wikiurl));\n        } else {\n          console.log(\"nowiki\");\n        }\n      });\n    }\n  }\n\n  googleSearch(data) {\n    const search = 'https://www.google.com/search?q=' + data;\n    this.setState({\n      googleSearch: search\n    });\n  }\n\n  twitterSearch(data) {\n    const search = 'https://twitter.com/search?q=' + data + '&src=typed_query';\n    this.setState({\n      twitterSearch: search\n    });\n  }\n\n  youtubeSearch(data) {\n    const search = 'https://www.youtube.com/results?search_query=' + data;\n    this.setState({\n      youtubeSearch: search\n    });\n  }\n\n  translate() {\n    if (this.state.trad === false) {\n      this.setState({\n        trad: true\n      });\n    } else {\n      this.setState({\n        trad: false\n      });\n    }\n  }\n\n  render(props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.selectContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: styles.selector,\n      onChange: this.handleChange.bind(this),\n      value: this.state.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 11\n      }\n    }, this.state.country.map((country, index) => /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      className: styles.options,\n      value: country.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, country.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }, this.state.reponse.map((trend, index) => /*#__PURE__*/React.createElement(\"div\", {\n      id: \"container\" + index,\n      className: styles.articleContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ButtonTrend, {\n      id: index,\n      display: this.state.displayButton,\n      trad: this.state.trad,\n      value: trend.topic.title.query,\n      click: this.handleClick.bind(this),\n      key: index,\n      title: trend.topic.title.query,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Viewer, {\n      id: \"button\" + index,\n      key: \"button\" + index,\n      click: this.handleClickoff.bind(this),\n      topics: trend.topic.title.query,\n      wikiurl: this.state.wikiurl,\n      wikititle: this.state.wiki,\n      googleSearch: this.state.googleSearch,\n      twitterSearch: this.state.twitterSearch,\n      youtubeSearch: this.state.youtubeSearch,\n      display: this.state.display,\n      source: trend.topic.articles[0].source,\n      title: trend.topic.articles[0].title,\n      url: trend.topic.articles[0].url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Preloader, {\n      display: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: styles.selector,\n      style: {\n        display: this.state.displaytrad\n      },\n      onClick: this.translate.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }\n    }, \"Traduire\")));\n  }\n\n}\n\nexport default Container;","map":{"version":3,"sources":["D:/Documents/app-file/tedenco - front/src/components/Container.js"],"names":["React","Component","ButtonTrend","styles","Viewer","wiki","countries","Preloader","Container","constructor","props","state","reponse","id","value","display","displaytrad","displayButton","loading","trad","googleSearch","twitterSearch","youtubeSearch","country","componentDidMount","fastResponse","Server","response","fetch","body","json","setState","data","News","map","tab","handleChange","event","target","handleClick","e","targt","document","getElementById","style","elem","getAttribute","element","className","articleContainerFull","handleClickoff","wikiSearchReturnValues","url","params","action","list","srsearch","format","Object","keys","forEach","key","then","query","search","push","queryResultPageTitle","title","undefined","console","log","apiUrl","find","page","wikiurl","raw","fullurl","translate","render","selectContainer","selector","bind","index","options","name","trend","articleContainer","topic","articles","source"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ButtonTrend from './ButtonTrend.js'\r\nimport styles from './Container.module.css';\r\nimport Viewer from './Viewer.js'\r\nimport wiki from 'wikijs'\r\nimport countries from './Api/countries.js'\r\nimport Preloader from './Preloader.js'\r\n\r\nclass Container extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      reponse:[],\r\n      id:\"\",\r\n      wiki:\"\",\r\n      value:\"FR\",\r\n      display:\"none\",\r\n      displaytrad:\"none\",\r\n      displayButton:\"inherit\",\r\n      loading:\"inherit\",\r\n      trad:false,\r\n      googleSearch:\"tendances\",\r\n      twitterSearch:\"tendances\",\r\n      youtubeSearch:\"tendances\",\r\n      country:countries()\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.fastResponse();\r\n    this.Server();\r\n}\r\n async fastResponse(){\r\n    const response= await fetch('https://tedenco-topics.herokuapp.com/first-trend');\r\n    const body = await response.json();\r\n      this.setState({ data: body})\r\n      this.News();\r\n  }\r\n  async Server(){\r\n    const response= await fetch('https://tedenco-topics.herokuapp.com/news-trend');\r\n    const body = await response.json();\r\n\r\n    this.setState({ data: body })\r\n  }\r\n  async News(){\r\n\r\nawait  this.setState({ loading:\"inherit\" })\r\nawait this.setState({ reponse: [] })\r\n\r\n   await this.state.data.map((tab)=>{\r\n\r\n      if (tab.country  === this.state.value){\r\n        this.setState({ loading:\"none\" })\r\n        this.setState({ reponse: [...this.state.reponse, tab] })\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n\r\n  handleChange (event){\r\n    this.setState({value: event.target.value}, ()=>{\r\n      this.News();\r\n      if(this.state.value === \"FR\"){\r\n          this.setState({displaytrad: \"none\"})\r\n\r\n      }else{\r\n        this.setState({displaytrad: \"inherit\"})\r\n\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  handleClick(e){\r\n     const targt = \"button\" + e.target.id;\r\n\r\n    document.getElementById(targt).style.display=\"inherit\";\r\n    this.setState({displayButton:\"none\"})\r\n    const elem = e.target.getAttribute('name')\r\n    const id = e.target.id;\r\n    this.setState({id:id});\r\n    this.wiki(elem)\r\n    this.googleSearch(elem);\r\n    this.twitterSearch(elem);\r\n    this.youtubeSearch(elem);\r\n    const element = document.getElementById(\"button\" + id)\r\n    element.className=styles.articleContainerFull\r\n  }\r\n\r\n  handleClickoff(e){\r\n    this.setState({displayButton:\"inherit\"})\r\n  const element = document.getElementById(\"button\" + this.state.id)\r\n  this.setState({display:\"none\"});\r\n  element.style.display=\"none\";\r\n\r\n  }\r\n\r\n   wiki(data){\r\n     {\r\n       const wikiSearchReturnValues = []\r\n\r\n         var url = \"https://fr.wikipedia.org/w/api.php\";\r\n         var params = {\r\n           action: 'query',\r\n           list: 'search',\r\n           srsearch: data,\r\n           format: 'json'\r\n         };\r\n\r\n         url = url + '?origin=*';\r\n         Object.keys(params).forEach((key) => {\r\n           url += \"&\" + key + \"=\" + params[key];\r\n         });\r\n\r\n         fetch(url)\r\n           .then(\r\n             (response) =>{\r\n               return response.json();\r\n             }\r\n           )\r\n           .then(\r\n             (response) =>{\r\n               for (var key in response.query.search) {\r\n                wikiSearchReturnValues.push({\r\n                   queryResultPageTitle: response.query.search[key].title,\r\n                 });\r\n               }\r\n             }\r\n           )\r\n\r\n           .then(\r\n             (response)=> {\r\n\r\n                if (wikiSearchReturnValues[0] !== undefined){\r\n                 let title = wikiSearchReturnValues[0].queryResultPageTitle;\r\n\r\n                  this.setState({wiki:title}, ()=>console.log(title));\r\n                  wiki({ apiUrl: 'https://fr.wikipedia.org/w/api.php' })\r\n                    .find(title)\r\n                      .then(page => this.setState({wikiurl:page.raw.fullurl}), ()=>console.log(this.state.wikiurl))\r\n               }else {\r\n                 console.log(\"nowiki\")\r\n               }\r\n             }\r\n           )\r\n\r\n       }\r\n   }\r\n\r\n  googleSearch(data){\r\n    const search = 'https://www.google.com/search?q='+data;\r\n    this.setState({googleSearch:search})\r\n  }\r\n\r\n  twitterSearch(data){\r\n    const search = 'https://twitter.com/search?q='+data+'&src=typed_query'\r\n    this.setState({twitterSearch:search})\r\n  }\r\n\r\n  youtubeSearch(data){\r\n    const search = 'https://www.youtube.com/results?search_query='+data;\r\n    this.setState({youtubeSearch:search})\r\n  }\r\n\r\n  translate(){\r\n    if(this.state.trad === false){\r\n        this.setState({trad:true})\r\n    }else{\r\n      this.setState({trad:false})\r\n    }\r\n\r\n  }\r\n\r\n  render(props) {\r\n\r\n    return (\r\n      <div className={styles.Container}>\r\n        <div className={styles.selectContainer}>\r\n          <select  className={styles.selector} onChange={this.handleChange.bind(this)} value={this.state.value}>\r\n\r\n            {this.state.country.map((country, index)=>\r\n              <option key={index} className={styles.options} value={country.id}>{country.name}</option>\r\n            )}\r\n          </select>\r\n\r\n        </div>\r\n        <div >\r\n          {\r\n            this.state.reponse.map((trend, index) =>\r\n\r\n            <div id={\"container\" + index} className={styles.articleContainer}>\r\n\r\n              <ButtonTrend id={index} display={this.state.displayButton} trad={this.state.trad} value={trend.topic.title.query} click={this.handleClick.bind(this)} key={index} title={trend.topic.title.query}/>\r\n\r\n              <Viewer\r\n                id={\"button\" + index}\r\n                key={\"button\" + index}\r\n                click={this.handleClickoff.bind(this)}\r\n                topics={trend.topic.title.query}\r\n                wikiurl={this.state.wikiurl}\r\n                wikititle={this.state.wiki}\r\n                googleSearch={this.state.googleSearch}\r\n                twitterSearch={this.state.twitterSearch}\r\n                youtubeSearch={this.state.youtubeSearch}\r\n                display={this.state.display}\r\n                source={trend.topic.articles[0].source}\r\n                title={trend.topic.articles[0].title}\r\n                url={trend.topic.articles[0].url}\r\n                />\r\n\r\n            </div>\r\n\r\n          )}\r\n\r\n          <Preloader display={this.state.loading} />\r\n\r\n          <button className={styles.selector} style={{display:this.state.displaytrad}} onClick={this.translate.bind(this)}>Traduire</button>\r\n\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container;\r\n"]},"metadata":{},"sourceType":"module"}